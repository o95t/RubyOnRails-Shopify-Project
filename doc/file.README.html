<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.7.4
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!file.README.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>Shopify Aramex Rails app Documentation</h1>

<p>This is a Ruby on Rails Application which lets Shopify customers interact with Aramex. The application serves as a bridge between the Shopify and Aramex APIs.</p>

<h3>Developed By</h3>

<p>Rohit Mishra
<a href="mailto:rohit@rohitmishra.me">rohit@rohitmishra.me</a></p>

<h3>Basic Information</h3>

<ul>
<li>The application is written on <strong>Ruby on Rails 3.2.13</strong> and is developed on <strong>Ruby 2.0.0-p0</strong></li>
<li>This application has the following functionalities: <strong>Creating Shipments, Creating Pickups, Tracking Shipments and Rate Calculator.</strong></li>
<li>The WSDL files for the Aramex API is located in the <code>public/wsdl</code> folder. The filenames are hardcoded in the <code>application/config.html.erb</code> which must be updated when the filenames are changed. </li>
<li>The Shopify API values are present in <code>config/initializers/omniauth.rb</code></li>
<li>The app is dependent on the Shopify_API, Omniauth and Savon gems among others. Please see the <code>Gemfile</code> for all the gems.</li>
</ul>

<h3>Requirements from Shopify customers</h3>

<ul>
<li>They need to add their Aramex information when they first authenticate the Aramex app with their Shopify shop. </li>
<li>They must specify weights of their products in their Shopify admin. </li>
<li>They must fulfil all the line items of an order together in one shipment. </li>
</ul>

<h3>Code Documentation</h3>

<ul>
<li>The code documentation is generated using Yard and is available at <code>doc/index.html</code> </li>
<li>The documentation can be always regenerated by first installing the <code>yard</code> gem using <code>gem install yard</code> and then running <code>yard doc</code></li>
<li>For any clarifications, please contact the developer. </li>
</ul>

<h3>Deployment</h3>

<h1></h1>

<h1>Instructions to install shopify_aramex on a Ubuntu (Linux) VPS</h1>

<p>ssh <a href="mailto:shopify@125.22.54.223">shopify@125.22.54.223</a></p>

<h1>Switch to root user</h1>

<p>sudo -s </p>

<h1>Update system. Install git</h1>

<p>apt-get -y update
apt-get -y install curl git-core python-software-properties</p>

<h1>Install nginx</h1>

<p>add-apt-repository ppa:nginx/stable
apt-get -y update
apt-get -y install nginx
service nginx start</p>

<h1>Amol installed mysql</h1>

<h1>I only ran</h1>

<p>mysql_secure_installation</p>

<h1>Node.js</h1>

<p>add-apt-repository ppa:chris-lea/node.js
apt-get -y update
apt-get -y install nodejs</p>

<h1>Add a new user with root priviledges</h1>

<p>adduser deployer --ingroup sudo</p>

<h1>(Press enter enter and Y at last)</h1>

<h1>Password is same as shopify user</h1>

<p>su deployer
cd ~</p>

<h1>Install rbenv</h1>

<p>curl -L <a href="https://raw.github.com/fesplugas/rbenv-installer/master/bin/rbenv-installer">https://raw.github.com/fesplugas/rbenv-installer/master/bin/rbenv-installer</a> | bash</p>

<h1>Add rbenv to load path before these lines in .bashrc</h1>

<h1>If not running interactively, don&#39;t do anything</h1>

<p>[ -z &quot;$PS1&quot; ] &amp;&amp; return</p>

<h1>Before the above 2 lines, you need to add</h1>

<p>export RBENV_ROOT=&quot;$HOME/.rbenv&quot;</p>

<p>if [ -d &quot;$RBENV_ROOT&quot; ]; then
  export PATH=&quot;$RBENV_ROOT/bin:$PATH&quot;
  eval &quot;$(rbenv init -)&quot;
fi</p>

<h1>Reload .bashrc</h1>

<p>. ~/.bashrc</p>

<h1>Install ruby dependency packages</h1>

<p>rbenv bootstrap-ubuntu-12-04</p>

<h1>Install ruby 2.0</h1>

<p>rbenv install 2.0.0-p0</p>

<h1>Set ruby 2.0.0 as global ruby</h1>

<p>rbenv global 2.0.0-p0</p>

<h1>Check if this command shows 2.0.0</h1>

<p>ruby -v</p>

<h1>Install bundler</h1>

<p>gem install bundler --no-ri --no-rdoc
rbenv rehash</p>

<h1>See what this shows</h1>

<p>bundle -v</p>

<h1>Create production database and a user for it</h1>

<p>mysql -u root -h localhost -p </p>

<h1>Give the root password</h1>

<h1>on mysql prompt</h1>

<p>create database shopify_aramex_production;
create user shopify;
grant all on shopify_aramex_production.* to &#39;shopify&#39;@&#39;localhost&#39; identified by &#39;shopify@123&#39;;
exit</p>

<h1>Add mysql ruby dependencies</h1>

<p>sudo apt-get install libmysql-ruby libmysqlclient-dev</p>

<h1>On client (should have git)</h1>

<h1></h1>

<h1>Add the ip address to server line in config/deploy.rb</h1>

<h1>Make this script executable</h1>

<p>chmod +x config/unicorn_init.sh</p>

<h1>Commit all changes</h1>

<p>git add .
git commit -m &quot;Deployment config files&quot;</p>

<h1>Run capistrano setup</h1>

<p>cap deploy:setup</p>

<h1>Now ssh in to server and edit the database.yml file present in ~/apps/shopify_aramex/shared/config/</h1>

<h1>Edit the file to have this content</h1>

<p>production:
  adapter: mysql2
  encoding: utf8
  database: shopify_aramex_production
  pool: 5
  host: localhost
  username: shopify
  password: <password>
  timeout: 5000</p>

<h1>Now run</h1>

<p>cap deploy:cold</p>

<h1>Delete symlink to default nginx site</h1>

<p>sudo rm /etc/nginx/sites-enabled/default 
sudo service nginx restart
sudo update-rc.d unicorn_shopify_aramex defaults</p>
</div></div>

    <div id="footer">
  Generated on Tue Jul  8 14:12:07 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-1.9.3).
</div>

  </body>
</html>